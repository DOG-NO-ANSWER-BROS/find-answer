# 정리

# 사전 지식 - 이상현상(Anomaly)
삭제 이상: 튜플 삭제 시 같이 저장된 다른 정보까지 연쇄적으로 삭제되는 현상
삽입 이상: 튜플 삽입 시 특정 속성에 해당하는 값이 없어 NULL을 입력해야 하는 현상
수정 이상: 튜플 수정 시 중복된 데이터의 일부만 수정되어 일어나는 데이터 불일치 현상

- 이상현상은 각각의 튜플에서 서로 공유하는 데이터가 독립적으로 존재하기 때문에 발생

# 정규화
데이터베이스 정규화는 이상현상을 완화함. 이 이상현상의 완화는 테이블간의 중복데이터를 허용하지 않는 것에서 비롯되기 때문에, 어느 수준까지 중복을 허용하느냐가 정규화의 정도를 결정함.

## 정규화 수준
1. 제1정규화
  - 테이블의 컬럼이 원자값(Atomic value)를 갖도록 테이블을 분해하는 것을 말함.
  - 예시 :
  - ![image](https://user-images.githubusercontent.com/51393021/134598706-67c797e3-035f-4f13-abdd-07152bb343bb.png)
  - 위의 예시에서 추신수와 박세리는 여러개의 취미를 갖고 있기 때문에 제1정규형을 만족하지 못하고 있음. 제1 정규화를 진행하면?
  - ![image](https://user-images.githubusercontent.com/51393021/134598814-ce709647-52e9-44c9-8e94-c0eacae185f9.png)

2. 제2정규화
  - 제1정규화를 진행한 테이블에 대해 완전 함수 종속을 만족하도록 테이블을 분해하는 것을 말함. 여기서 완전 함수 종속이라는 것은 기본키의 부분집합이 결정자가 되어선 안된다는 것을 의미.
  - 뭔 말이고...?
  - 예시로 알아보자. 다음 처럼 제1정규형을 만족하는 테이블이 있다.
  - ![image](https://user-images.githubusercontent.com/51393021/134600056-85e4dc6b-d3db-4b28-89c8-1f8698cc25d5.png)
  - 위 테이블의 기본키는 (학생번호, 강좌이름)으로 복합키이다. 그리고 (학생번호, 강좌이름)인 기본키는 강의실을 결정하고 있다(결정자). (학생번호, 강좌이름) --> (강의실)
  - 그런데 여기서 강의실이라는 컬럼은 기본키의 부분집합인 강좌이름에 의해서도 결정될 수 있다. (강좌이름) --> (강의실)
  - 그렇기 때문에 위의 테이블의 경우 다음과 같이 기존의 테이블에서 강의실을 분해하여 별도의 테이블로 관리하여 제2 정규형을 만족시킬 수 있다.
  - ![image](https://user-images.githubusercontent.com/51393021/134600175-d19bb73e-338b-4c3e-ae30-10d182daf5af.png)

3. 제3정규화
  - 제2정규화를 진행한 테이블에 대해, 이행적 종속을 없애는 것을 뜻함. 여기서 이행적 종속이란, A -> B, B -> C가 성립할 때 A -> C가 성립되는 것을 의미함.
  - ![image](https://user-images.githubusercontent.com/51393021/134600271-4666a409-e95f-4fba-a670-fed9f638984d.png)
  - 기존의 테이블에서 학생 번호는 강좌 이름을 결정하고 있고, 강좌 이름은 수강료를 결정하고 있다. 그렇기 때문에 이를 (학생 번호, 강좌 이름) 테이블과 (강좌 이름, 수강료) 테이블로 분해해야 한다.
  - ![image](https://user-images.githubusercontent.com/51393021/134600348-7a203341-7c0c-46a7-a781-1cb0ab4041d9.png)

4. BCNF 정규화
  - BCNF 정규화란 제3 정규화를 진행한 테이블에 대해 모든 결정자가 후보키가 되도록 테이블을 분해하는 것임. 예를 들어 다음과 같은 특강수강 테이블이 있음.
  - ![image](https://user-images.githubusercontent.com/51393021/134600433-d7d95566-a934-49eb-acf1-b481d67ef27a.png)

  - 특강수강 테이블에서 기본키는 (학생번호, 특강이름)이다. 그리고 기본키 (학생번호, 특강이름)는 교수를 결정하고 있다. 또한 여기서 교수는 특강이름을 결정하고 있다.
    그런데 문제는 교수가 특강이름을 결정하는 결정자이지만, 후보키가 아니라는 점이다. 그렇기 때문에 BCNF 정규화를 만족시키기 위해서 위의 테이블을 분해해야 하는데, 다음과 같이 특강신청 테이블과 특강교수 테이블로 분해할 수 있다.
  - ![image](https://user-images.githubusercontent.com/51393021/134600486-dc9d5285-cf50-4649-89d0-5938168179b8.png)

# 질문
- 실무에선 어느 정도까지의 정규화를 진행하는 것이 좋을까?
