# Index란 무엇인가요? 장단점을 설명해주세요

## Index

테이블에 대한 동작 속도를 높여주는 자료 구조. 데이터베이스에서 테이블을 액세스할 때 모든 열을 다 조회할 필요 없이 데이터를 가지고 오기 위해 사용한다. 하나의 열 또는 다수의 열을 이용하여 만들 수 있으며, 랜덤으로 조회할 때나 정렬된 결과를 가지고 올 때 모두 사용된다. 공간을 더 사용하여 속도를 향상시키는 개념이다.

## 인덱스 종류

### Clustered Index
* 테이블당 한 개만 생성 가능하다.
* 해당 컬럼을 기준으로 테이블이 물리적으로 정렬된다.
* 물리적으로 정렬되기 때문에 리프노드가 필요없으며 추가 공간 역시 필요하지 않다.
* PRIMARY KEY 설정 시 자동으로 생성되며, 데이터 변경시 항상 정렬을 유지한다.
* 모든 보조 인덱스가 PRIMARY KEY 를 포함하게 된다. 
* 데이터가 변경되면 PRIMARY KEY 관련 작업을 해야하므로 성능이 저하된다.

### NonClustered 인덱스
* 테이블당 최대 249개 생성 가능하다. 하지만 남용할 경우 성능이 오히려 저하된다.
* 테이블의 페이지를 정렬하지 않으며, 새로운 공간을 할당한다.
* 클러스터 인덱스보다 검색 속도는 느리지만 입력 / 수정 / 삭제는 더 빠르다.

## 장점과 단점

### 장점

데이터가 정렬되어 있어서 얻을 수 있는 이점이 많다.

* where 절을 사용할 때 Full Table Scan 을 하지 않아도 된다. 즉, 테이블에 있는 모든 행을 다 확인하지 않아도 데이터를 빠르게 찾을 수 있다.

* order by 를 효율적으로 사용할 수 있다. order by 는 부하가 많이 걸리는 작업인데, 인덱스는 이미 정렬되어 있다.

* MIN, MAX 역시 효율적으로 사용할 수 있다. 정말 간단하게 가장 위 또는 가장 아래에 있는 행을 가져오면 되기 때문이다. 이 역시 정렬되어 있지 않은 테이블에서는 Full Table Scan 이 필요한 작업이다.

### 단점

* SELECT 의 성능을 향상시킬 수 있어도 INSERT, UPDATE, 그리고 DELETE 의 성능은 낮아진다.
  * 데이텉의 변경이 생기면 테이블 뿐만이 아니라 인덱스 역시 변경해야하기 때문이다.
  
* 인덱스를 사용하면 하드 디스크와 RAM 의 공간을 더 차지한다.

* 값이 많지 않은 열을 이용하여 index 를 만들경우 SELECT 의 성능 향상이 그리 크지 않다. 예를 들어 gender(성별).

* 쿼리에서 특정 컬럼들을 조건으로 걸 때, 정렬된 인덱스의 순서가 맞지 않으면 추가 비용이 발생한다.
