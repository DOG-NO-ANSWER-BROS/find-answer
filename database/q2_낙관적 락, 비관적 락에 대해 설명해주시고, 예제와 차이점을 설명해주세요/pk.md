# 낙관적 락, 비관적 락

## 트랜잭션

### 원자성

하나의 트랜잭션 안에 일어나는 일들은 **모두 성공**하거나 **모두 실패**함.

### 일관성

모든 트랜잭션은 일관성 있는 데이터베이스 상태를 유지해야 함.

### 지속성

트랜잭션의 결과는 영구적으로 반영되어야 함.

### 격리성

동시에 일어나는 트랜잭션은 서로가 서로에게 영향을 받지 않아야 함.

## JPA
- Java Persistence API

## 다시, 격리성

격리성은 동시성과 크게 연관이 있다. 한 가지 트랜잭션이 데이터를 수정하고 있을 때
다른 트랜잭션이 동일한 데이터를 수정하지 못 하기 때문.
얼마나 격리시키느냐 / 느슨하게 하느냐가 동시성 성능에 영향을 준다.

### 낙관적 락

* 트랜잭션을 커밋하는 시점이 되어야 충돌이 있는지 알 수 있다.

### 비관적 락

* 트랜잭션에서 충돌이 발생할 것이라고 가정하여 우선 락을 건다.
* 그래서 데이터를 수정하다가 충돌이 발생하면 바로 알 수 있다.
* 데이터베이스에서 제공하는 락을 사용한다.
* 대표적으로 SELECT FOR UPDATE가 있다.
