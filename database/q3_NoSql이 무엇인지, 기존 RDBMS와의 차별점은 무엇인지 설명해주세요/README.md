
![https://user-images.githubusercontent.com/48986787/127773393-8ef062fc-dc31-4111-be99-685cd97f8284.png](https://user-images.githubusercontent.com/48986787/127773393-8ef062fc-dc31-4111-be99-685cd97f8284.png)

# 사전정보 : SQL이란?
## SQL: Relational databases

데이터구조는 SQL과 NoSQL을 구분하는 주요 기능 중 하나에요. 이를 살펴보도록해요.
`관계형 데이터베이스`는 전화번호부 처럼 데이터를 저장하는 구조화된 방법이에요. column과 row가 있는 두 개 이상의 테이블로 구성돼요. 각각의 row는 정보를 나타내고, column은 이름, 주소, 및 전화번호와 같은 매우 특정한 유형의 정보를 정렬해요. 

![https://user-images.githubusercontent.com/48986787/127777103-a562c9ef-7edd-45c4-82bb-8714bcfbe22c.png](https://user-images.githubusercontent.com/48986787/127777103-a562c9ef-7edd-45c4-82bb-8714bcfbe22c.png)

테이블과 필드 타입간의 관계를 스키마라고 해요. `관계형 데이터베이스`에서 스키마는 정보를 추가하기 전에 명확하게 정의되어야 해요. 즉, 각 테이블과 필드의 설계를 확실히 하고 데이터를 저장 해야함을 의미해요.
잘 설계된 스키마는 데이터 중복을 최소화하고, 테이블이 동기화되지 않는 것을 방지해요. 
잘 설계되지 않은 스카미의 예를 들어보죠. 국내휴대전화번호를 저장하도록 설계된 Column은 11자리의 수(xxx-xxxx-xxxx)가 필요할거에요. 이렇게 Column을 지정하면, 잘못된 값을 저장하지 않을 수 있다는 이점이 있어요.
하지만, 스키마를 변경해야하는 경우(11자리 이상의 국제 전화번호 항목을 포함해야 하는 경우)에 전체 데이터베이스를 편집해야해요. 즉, 데이터의 유연성이 떨어지게돼요.

`SQL(Structured Query Language)`은 데이터베이스 설계자가 관계형 데이터베이스를 설계하는 데 사용하는 프로그래밍 언어에요. SQL은 쿼리를 통해 데이터를  생성, 검색, 수정, 삭제해요.
SQL의 가장 큰 장점 중 하나는 간단하면서도 강력한 JOIN절이에요. 이를 통해 개발자는 하나의 명령어로 여러 테이블에 저장된 관련 데이터를 검색 할 수 있어요. join과 여러 소프트웨어 호환성이 뛰어나다는 장점으로 SQL 데이터베이스는 인기가 많아요.

<br>

## SQL종류

### MySQL

가장 인기 있는 오픈 소스 데이터베이스

### MariaDB

MySQL을 포함하고 향상된 데이터베이스

### PostgreSQL

### Oracle

C++ 언어로 작성된 객체 관계형 데이터베이스

### IMB DB2

### Sybase

### MS SQL Server

### Microsoft Azure

모든 운영 체제를 지원하고 데이터를 한 곳에서 저장, 계산 및 확장할 수 있는 클라우드 컴퓨팅 플랫폼 제공

## 장점

- 정해진 스키마에 따라 데이터를 저장 하므로 데이터 구조가 명확하다
- 중복 없이 한번만 저장 가능

## 단점

- 테이블 간의 관계를 맺고 있으면 JOIN문이 많은 복잡한 쿼리가 만들어질 수 있다
- 성능 향상을 위해서는 서버의 성능을 향상시켜야하는 Scale- up만을 지원한다. → 비용이 많이 든다
- 스키마로 인해 데이터가 유연하지 못하다.

## NoSQL 

NoSQL이 무엇의 약자인지는 사람들마다 의견이 다르다. No SQL, Not Only SQL, Non-Relational Operational Database SQL로 의견이 나뉜다. 대부분은 Not Only SQL로 설명을 하고 있다. 기존 RDBMS 방식을 탈피한 데이터베이스를 의미한다.
기존의 관계형 DB가 가지고 있는 특성뿐만 아니라 다른 특성들을 부가적으로 지원한다. RDBMS가 가지고 있는 한계를 극복하기 위한 데이터 저장소의 새로운 형태로, 수평적 확장성을 가지고 있다. 문서, 그래프, 키 값, 인 메모리, 검색을 포함해 다양한 데이터 모델을 사용한다. NoSQL은 클라우드 환경에 맞는 저장 기술
2000년대 스토리지 비용이 크게 하락하면서, RDBMS가 갖는 장점 중 하나인 데이터 중복 감소의 비용보다, 개발자 생산성(테이블 설계 비용)이 커졌기 때문에 NoSql Database가 각광받기 시작했다.
NoSQL 데이터베이스는 개발자가 SQL을 배우거나 데이터베이스 시스템의 기본 아키텍처를 이해하지 않고도 API를 통해 쿼리를 실행할 수 있어요.

## NoSQL 특징

- RDBMS와 달리 데이터간의 관계를 정의하지 않는다
- RDBMS에 비해 훨씬 더 대용량의 데이터를 저장할 수 있다.
- 반정형화, 비정형화된 데이터에 적합하다
- 분산형 구조이고 확장성이 뛰어나다
- 고정되지 않은 테이블 스키마를 가진다
- ACID 대신 Eventual Consistency 를 허용한다
    - Eventual Consistency → 다양한 기기에 분산 저장되있는 데이터를 Update 할 경우 실시간으로 다른 기기에 전파하기 어려운데 이 점을 조금 타협하여 최신은 아닐 수 있지만 Update 전까지는 최신의 데이터를 반환한다.

## 유형

1. 문서 데이터베이스
    1. 문서 데이터베이스는 JSON(JavaScript Object Notation) 객체와 비슷한 문서에 데이터를 저장한다. 각 문서에는 필드와 값의 쌍이 포함되어 있다. 일반적으로 값은 문자열, 숫자, 불리언(boolean), 어레이, 객체 등 유형이 다양할 수 있으며, 구조는 개발자가 코드에서 사용하고 있는 객체에 맞춰 조정된다. 대표적인 DBMS로 MongoDB가 있다. 
    2. 몽고DB와 RDBMS간의 저장방식 차이
        <img width="1122" alt="스크린샷 2021-08-19 오후 11 13 32" src="https://user-images.githubusercontent.com/51393021/130087472-e10b4367-a56c-445e-bcd1-f59aa6ff757f.png">

2. key-value 데이터베이스
    1. 키-값 데이터베이스는 각 항목에 키와 값이 포함되어 있는 보다 간한 유형의 데이터베이스이다. 값은 보통 키를 참조하는 방식으로만 검색이 가능하기 때문에 일반적으로 특정 키-값 쌍에 대해 쿼리를 수행하는 방법을 간단히 익힐 수 있다. 키-값 데이터베이스는 대량의 데이터를 저장해야 하지만 검색을 위해 복잡한 쿼리를 수행할 필요가 없는 사용 사례에 적합하다. 일반적인 사용자 선호도 저장 또는 캐싱에서 사용된다. 대표적으로 Redis와 DynanoDB가 있다.
3. 와이드 컬럼 스토어
    1. 와이드 컬럼 스토어는 테이블, 행 및 동적 열에 데이터를 저장한다. 와이드 컬럼 스토어는 각 행이 동일한 열을 가질 필요가 없다는 점에서 관계형 데이터베이스에 대해 뛰어난 유연성을 제공한다. 2차원적 key-value 스토어라고 생각할 수 도 있다. 와이드 컬럼 스토어는 대량의 데이터를 저장해야 할 때 적합하며, 쿼리 패턴을 예측할 수 있다. 와이드 컬럼 스토어는 보통 사물인터넷 데이터와 사용자 프로필 데이터를 저장하는 데 사용된다. 대표적으로 Cassandra와 HBase가 있다.
4. 그래프 데이터베이스 
    1. 그래프 데이터베이스는 노드와 에지에 데이터를 저장한다. 노드에는 일반적으로 사람, 장소 및 사물에 대한 정보가 저장되고, 에지에는 노드 간의 관계에 대한 정보가 저장된다. 그래프 데이터베이스는 소셜 네트워크, 사기 탐지, 권장 엔진 같은 패턴을 찾아보기 위해 관계를 상세히 검토해야 하는 사용 사례에 적합하다. 대표적으로 Neo4j와 JanusGraph가 있다.

## 장점

- 스키마가 없기 때문에 유연한 데이터 구조를 가질 수 있다. (유연성)
- 데이터 분산이 용이하며 성능 향상을 위한 Scale-up, Scale-out 둘다 가능하다 (확장성)
- 특정 데이터 모델 및 액세스 패턴에 대해 최적화 되어 관계형 DB를 통해 유사한 기능을 충족하려 할 때 보다 뛰어난 성능을 얻게 해준다 (고성능)
- 각 데이터 모델에 맞춰 특별히 구축된 뛰어난 기능의 API와 데이터 유형을 제공(고기능성)

## 단점

- 데이터의 중복이 있을 수 있다 → 데이터 변경시 모든 컬렉션에서 수행을 해야함
- 스키마가 존재하지 않아 명확한 데이터구조를 보장하지 못한다.
- 인력 운영이 더 비싸다(NoSQL의 러닝커브가 높다)
- 제품 지원을 받기 어렵다

## 언제 어느 것을 쓰면 좋을까?

데이터베이스 기술과 관련하여 만능 해결책은 없어요. 그렇기 때문에 많은 기업이 다양한 작업을 위해 관계형 데이터베이스와 비관계형 데이터베이스를 모두 사용해요. NoSQL 데이터베이스가 속도와 확장성으로 인기를 얻고 있지만 여전히 고도로 구조화된 SQL 데이터베이스가 선호되는 상황이 있어요. 다음은 SQL 데이터베이스를 선택하는 몇 가지 이유예요.

# RDBMS와의 비교

|개요|SQL|NoSQL|
|:---|:---|:---|
|데이터 저장 모델|행과 열이 고정된 테이블|문서: JSON 문서, 키-값: 키-값 쌍, 와이드 열: 행과 동적 열이 있는 테이블, 그래프: 노드 및 가장자리|
|등장 배경|데이터 중복 감소에 중점을 두고 1970년대에 개발됨|2000년대 후반에 확장에 중점을 두고 애자일 및 DevOps 방식으로 구동되는 신속한 애플리케이션 변경을 허용하도록 개발|
|대표 데이터베이스|Oracle, MySQL, Microsoft SQL Server 및 PostgreSQL|문서: MongoDB 및 CouchDB, 키-값: Redis 및 DynamoDB, 와이드 컬럼: Cassandra 및 HBase, 그래프: Neo4j 및 Amazon Neptune|
|주요 목적|범용|문서: 범용, 키-값: 단순 조회 쿼리를 통한 대용량 데이터, 와이드 컬럼: 예측 가능한 쿼리 패턴을 갖는 대용량 데이터, 그래프: 연결된 데이터 간의 관계 분석 및 탐색|
|스키마|엄격|유연|
|스케일링|수직(더 큰 서버로 확장)|수평(일반 서버 전반에 걸쳐 확장)|
|다중 레코드 ACID 트랜잭션|지원|대부분은 다중 레코드 ACID 트랜잭션을 지원하지 않습니다. 최신버전의 Mongo(4.0이상) 등은 지원|
|조인|일반적으로 필수|일반적으로 필요하지 않음|
|데이터 - 객체맵핑|ORM(객체 관계형 매핑) 필요|많은 경우 ORM이 필요하지 않음.|

### RDBMS

- ACID 를 보장해야 할 때
  - ACID 보장은 트랜잭션이 데이터베이스와 상호 작용하는 방식을 정확히 규정하여 에러를 줄이고 데이터베이스의 무결성을 보호해요. 일반적으로 NoSQL 데이터베이스는 유연성과 처리 속도를 위해 ACID 준수를 희생하지만 많은 전자 상거래 및 금융 애플리케이션의 경우 ACID 보장 데이터베이스가 여전히 선호되는 옵션이에요.
- 명확한 스키마가 중요한 경우 RDBMS를 사용하는 것이 좋다.
- 데이터의 중복이 없고 변경이 용이하기 때문에 데이터가 자주 변경이 일어나는 경우
- 클라우드 컴퓨팅 및 스토리지를 최대한 활용할 때
  - 클라우드 기반 스토리지는 탁월한 비용 절감 솔루션이지만 확장하려면 데이터를 여러 서버에 쉽게 분산시켜야 해요. 온사이트 또는 클라우드에서 상용(저렴하고 더 작은) 하드웨어를 사용하면 추가 소프트웨어의 번거로움을 줄일 수 있으며 Cassandra와 같은 NoSQL 데이터베이스는 많은 골칫거리 없이 즉시 여러 데이터 센터에 걸쳐 확장할 수 있도록 설계되있어요.
  
### NoSQL

- NoSQL은 데이터의 구조를 알 수 없는 경우 사용하는 것이 좋다.
- Update가 많이 이뤄지지 않는 시스템이 좋다
- Scale-out이 가능하다는 장점이 있어 막대한 데이터를 저장해야하는 경우 적합하다.
- 기존의 정형화된 데이터 뿐만 아니라 메신저 텍스트, 음성 등 반정형화, 비정형화된 데이터도 저장하고 다루어야 하는 경우
* 대규모 데이터를 다루는데 해당 데이터의 특징이 자주 바뀌는 경우
* 강력한 일관성보다 성능과 가용성이 더 중요한 서비스인 경우
* 굳이 ACID 특징이 필요 없는 읽기 전용 데이터를 관리하는 경우

## 질문

- RDBMS와 NoSQL의 실제 데이터의 저장용량은 어느정도인가?
  - NoSql은 데이터의 중복성을 RDBMS보다 적게 신경쓰므로, 동일한 데이터를 저장할 때 RDBMS보다 용량을 많이 차지한다.
- 비정형데이터인 영상, 음성 등은 NoSQL에 어떻게 저장되어있는가?
  - 영상, 음성 등은 Database에서 관리하기보다 파일스토리지에 저장하고, 그 경로를 저장하는 경우가 많다. 음성 및 영상 데이터는 중복가능성이 없고 데이터가 지나치게 크기 때문이다.
- 유저 정보를 저장할 때 NoSQL 을 고려해볼만 하다고 하는데, 그 이유는?
  - 유저 정보는 비정형데이터인 경우가 많기 때문이다.
- 일반적인 게시판 프로젝트에서 어떤 데이터베이스를 선택해야할까?
  - 프로젝트 요구사항에 따라 다를 것이다. 어느정도 요구사항이 주로 나와있는 게시판 프로젝트는 RDBMS가 적절하지만, 변경가능성이 많다면 NoSQL도 고려해볼만 하다.
  
# 레퍼런스
- [SQL vs. NoSQL Databases: What’s the Difference?](https://www.upwork.com/resources/sql-vs-nosql-databases-whats-the-difference?utm_source=google&utm_campaign=SEM_GGL_INTL_NonBrand_Marketplace_DSA&utm_medium=cpc&utm_content=113089129402&utm_term=&campaignid=11384804789&matchtype=b&device=c&gclid=CjwKCAjwjJmIBhA4EiwAQdCbxuKKmxY9Iph0otnDTgAia4_LH2cYNOE6_mY4veUbF7y4OHD4EzgUTBoCLyQQAvD_BwE) 을 번역하며 정리한 것이에요.
- [NoSQL이란 무엇인가? 대량데이터 동시처리위한 DBMS 종류와 특징](https://www.samsungsds.com/kr/insights/1232564_4627.html)
- [NoSQL이란 무엇입니까? NoSQL Databases 설명](https://www.mongodb.com/ko-kr/nosql-explained)
- [[MongoDB] 강좌 1편: 소개, 설치 및 데이터 모델링](https://velopert.com/436)
