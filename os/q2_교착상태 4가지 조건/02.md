## 교착상태

두 개 이상의 작업이 상대방의 작업이 끝나기 만을 기다리고 있어서 아무것도 진행할 수 없는 상태를 말한다. 교착상태의 조건에는 4가지가 있다. 상호배제, 점유대기, 비선점, 원형대기(순환대기) 이다. 4가지 조건중 하나라도 만족하지 않으면 교착상태는 발생하지 않는다.

### 교착 상태의 조건

- 상호배제
    - 한 번에 프로세스 하나만 해당 자원을 사용할 수 있다.
- 점유대기
    - 자원을 최소 하나 보유하고, 다른 프로세스에 할당된 자원을 점유하기 위해 대기하는 프로세스가 존재
- 비선점
    - 이미 할당된 자원을 강제로 뺏을 수 없다
- 원형대기
    - 대기 프로세스의 집합이 순환 형태로 자원을 대기하고 있다

## 교착상태 해결 방법

- 예방
- 회피
- 탐지

### 예방

교착상태 발생 조건 4가지 중 하나라도 만족하지 않으면 교착 상태가 발생하지 않기 때문에 4가지 조건 중 하나라도 발생하지 않도록 한다.

- 상호 배제 방지
    - 한 번에 여러 프로세스가 공유 자원을 사용할 수 있도록 한다
- 점유 대기 방지
    - 프로세스 실행에 필요한 모든 자원을 한번에 요구하고 허용할 때까지 작업을 보류해서 또다른 자원을 점유하기 위한 대기를 하지 않도록 한다
- 비선점 조건 방지
    - 높은 우선순위의 프로세스가 해당 자원을 선점할 수 있도록 한다
- 순환 대기 조건 방지
    - 자원을 순환 형태로 대기하지 않도록 일정한 한 쪽 방향으로만 자원을 요구할 수 있도록 한다

### 회피

회피 알고리즘은 자원을 할당한 후에도 시스템이 항상 safe state에 있을 수 있도록 할당을 허용하는 것

- safe sequence
- safe state

### safe state

프로세스들이 요청하는 자원을, 교착상태 발생하지 않으면서 모두에게 차례로 할당한다면 안전상태에 있다고 한다

### safe sequence

순서대로 프로세스들에게 자원을 할당 할 때 데드락이 발생하지 않는 순서를 안전순서라고 한다.

### 은행원 알고리즘

미리 결정된 모든 자원들의 최대 가능한 할당량을 시뮬레이션해 safe state에 들 수 있는지를 확인한다. 대기중인 다른 프로세드르의 활동에 대한 교착 상태 가능성을 미리 조사하는 것

### 탐지 및 회복

교착상태가 발생했을 때 회복하기 위해 교착상태를 탐지하고 회복하는 알고리즘을 사용

### 탐지

교착상태가 발생했는지 여부를 탐색한다.(Allocation, Request, Avaliable)

### 회복

탐지를 통해 발견한 교착상태를 순환 대기에서 벗어나 교착상태로 부터 회복하기 위한 방법

- 프로세스를 1개 이상 중단
    - 교착상태에 빠진 모든 프로세스 중단
    - 프로세스를 하나씩 중단 하며 탐지 알고리즘으로 교착상태를 탐지하며 회복
- 자원 선점
    - 할당된 자원을 선점해, 교착 상태를 해결할 때까지 그 자원을 다른 프로세스에 할당

## 질문

- 기아상태란?
    - 특정 프로세스의 우선순위가 낮아 원하는 자원을 계속 할당받지 못하는 상태
    - 우선순위를 수시로 변경하거니 오래 기다린 프로세스 우선순위 향상 등의 방법으로 해결