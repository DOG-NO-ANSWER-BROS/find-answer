# 도커란?
도커는 `컨테이너 기반의 오픈소스 가상화 플랫폼` 이다. 이번에 mysql을 설치하며 사용해 보았다.

도커의 사용 목적은 다양한 프로그램, 실행환경을 하나의 `컨테이너` 로 추상화 해주는 것이다. 이를 이미지 화하여 동일한 환경의 서버설정, 특정 프로그램의 설정 등의 작업을 손쉽게 할 수 있게 되었다.  

1. `컨테이너` 라는 개념은 격리된 공간에서 프로세스가 동작하는 것이다. 일종의 가상화 기술인데, 기존 가상머신(VM Ware, Virtual Box)들과 다른 점은 host OS까지 가상화 하지 않고 도커 엔진위에서 프로세스가 동작할 수 있도록 해주었다는 점이다.이미지라는 개념은  
![Untitled](https://user-images.githubusercontent.com/51393021/123351955-42a8bf80-d599-11eb-9a0d-0b078f20c904.png)


2. `이미지` 라는 개념은 컨테이너 실행에 필요한 파일과 설정값등을 포함하고 있는 하나의 스냅샷이다. 상태를 가지지 않고 불변이다. 컨테이너는 이미지를 실행한 상태라고 볼 수 있다. 추가되거나 변화되는 값은 컨테이너에 저장된다. 같은 이미지에서 여러개의 컨테이너를 생성할 수 있고, 컨테이너가 추가되거나 상태가 변화하거나 삭제되더라도 이미지에는 영향을 주지 않는다.

# 도커로 서버 코드화 하기

도커라는 것은 어플리케이션을 환경에 구애받지 않고 실행하는 기능이다. 주로 서버를 구성할 때 장점을 느낄 수 있다.

서버 운영은 운영과정을 거치며, 조금씩 환경이 변해간다. 각각의 눈송이가 모습이 다른 것에 빗대어 눈송이 서버들(Snowflake Servers)라고 불린다. 아무리 별도의 서버에 대해서 환경을 맞추려고 노력해봐도, 서버 환경은 작은 차이에 의해 바뀌어 가고, 결국 `A서버는 잘 되는데 B서버는 왜 죽었지?` 같은 일이 벌어진다.

서버 운영시에 사용했던 명령어를 문서화 해놓기도 하고, tmux 등을 이용해 여러 서버에 동시에 같은 명령어만 입력하기도 한다.

그러나 문서에 적힌대로 동일하게 진행해도 안 되는 경우도 허다하다. 여러 서버를 동시조작해도 하나의 서버만 문제를 일으키는 경우도 생긴다.

하지만 도커, 도커는 이런 난해함을 해결해주는 해결사로 등장한다.

도커에서 사용하는 도커파일(Dockerfile)도 앞서 이야기한 서버 운영 기록을 코드화한 것이다.

```java
# Nginx 서버를 구성하는 도커 파일
FROM debian:stretch-slim

# imagemagick 어플리케이션 설치
RUN apt-get update \
    && apt-get install -y \
    imagemagick
```

이 도커 파일로 도커 이미지를 만들 수 있다. 도커 파일이 서버 운영 기록이라면, 도커 이미지는 운영 기록을 실행할 시점이라고 할 수 있다.

```java
도커 파일 == 서버 운영 기록
도커 이미지 == 도커 파일 + 실행 시점
도커 컨테이너 == 도커 이미지 + 환경 변수
```
![Untitled2](https://user-images.githubusercontent.com/51393021/123351991-581de980-d599-11eb-9d14-1ca227100408.png)

실행 시점에 상관 없이 구성 시점을 고정할 수 있는 도커

이것이 바로 도커가 여느 서버 구성 도구와 가장 다른 부분이다. 다른 도구들은 모두 도구를 실행하는 시점에 서버의 상태가 결정되는 데 비해, 도커는 작업자가 그 시점을 미리 정해둘 수 있다. 덕분에 서버는 항상 똑같은 상태로 있을 수 있다.

## 서버 코드화의 장점

1. 서버 제작 과정에 견고함과 유연성을 더할 뿐 아니라
2. 다른 이가 만든 서버를 소프트웨어 사용하듯 가져다 쓸 수 있고
3. 여러 대에 배포할 수 있는 확장성

# 질문
- 쿠버네티스는 무엇일까?
