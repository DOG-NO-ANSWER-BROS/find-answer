## Http

- http란 Hyper Text transfer Protocol의 약자로, 인터넷 프로토콜 스택의 4계층 중 애플리케이션 계층의 프로토콜이다.
- 프로토콜은 컴퓨터 사이에 원활한 데이터 통신을 하기 위해 필요한 통신규약이다.
- 80포트를 사용한다.

HTTPS는 HTTP의 하부에 전송 레벨 암호 보안 계층을 제공함으로써 동작한다.

## HTTPS(Hyper Text Transfer Protocol Secure)

- HTTPS는 HTTP에 데이터 암호화가 추가된 프로토콜이다
- 433번 포트 사용
- 제3자가 정보를 볼 수 없도록 공개키 암호화를 지원
- 검색엔진 최적화에 있어서 큰 혜택을 볼 수 있다.
- SSL 인증서 사용

## HTTP와 HTTPS

두 프로토콜 사이에서 가장 큰 차이점은 SSL인증서이다.

HTTP는 암호화가 추가되지 않아 보안에 취약하다. HTTPS는 암호화가 추가되어 안전하게 데이터를 주고 받을 수 있다. 하지만 HTTPS는 암호화와 복호화 과정이 필요해서 HTTP보다 속도가 느리다.(요즘은 거의 차이가 없다고 한다)

또한 HTTPS는 인증서를 발급하고 유지하기 위한 비용이 발생한다.

| 계층 | HTTP | HTTPS | 
| --- | --- | --- |
| 애플리케이션 계층 | HTTP | HTTP |
| 보안 계층 | - | SSL 혹은 TLS |
| 전송 계층 | TCP | TCP |
| 네트워크 계층 | IP | IP |
| 데이터 링크 계층 | 네트워크 인터페이스 | 네트워크 인터페이스 |

* 암호 보안 계층에서 사용되는 것으로 SSL과 TLS이 있는데, 둘이 매우 비슷하여 'SSL'로 통일해서 표현하는 경우가 많다. (HTTP 완벽 가이드 라는 책에서도 합쳐서 설명한다)

## handshake
* CA - Certificate Authorization
* 브라우저에 CA의 목록이 내장되어 있다.

    * 클라이언트가 랜덤 데이터로 서버에 요청
    * 서버도 클라이언트에게 랜덤 데이터 응답 + 인증서를 보낸다
    * 인증서는 CA의 개인키로 암호화가 되어있다
    * 클라이언트는 CA의 목록에서 CA의 공개키로 인증서를 복호화한다
    * 복호화된 인증서에는 서버의 개인키가 포함되어 있다
    * 비대칭키 암호화는 대칭키 암호화보다 컴퓨터에 더 큰 부하를 일으킨다
    * 앞서 사용된 랜덤 데이터들을 사용하여 클라이언트가 임시키를 만들고 서버의 공개키로 해당 임시키를 암호화하여 서버에게 보낸다
    * 서버에서 해당 임시키를 복호화 하여 클라이언트와 서버가 동일하게 갖고 있는 대칭키가 생성된다
    * 해당 대칭키로 서버와 클라이언트가 요청과 응답을 주고받을 수 있다!

---

## 질문
- **https도 디폴트 포트가 8080일까?**

    NO. 만약 URL이 https 스킴을 갖고 있다면 클라이언트는 서버에 443번 포트로 연결하고 서버와 바이너리 포맷으로 된 몇몇 SSL 보안 매개변수를 교환하면서 '핸드셰이크'를 하고, 암호화된 HTTP 명령이 뒤를 잇는다.


- **SSL은 무엇인가? HTTPS 와 SSL 의 차이?**

  SSL은 보안계층이라는 독립적인 프로토콜 계층을 만들어 응용계층과 전송계층사이에 속하게 된다. HTTPS 는 SSL 과 HTTP 프로토콜을 얹어 보안된 HTTP 통신을 하는 프로토콜. SSL 은 FTP, SMTP 같은 다른 프로토콜에더 적용할 수 있다. SSL의 후속 버전이 TLS

  SSL 암호화 통신

    1. 핸드셰이크
    2. 전송
    3. 종료