![image](https://user-images.githubusercontent.com/63634505/137336346-7151d21d-b8f6-4e66-bd8c-a8857bd4036f.png)

## CA란?

Certification Authority 인증기관, 전자서명 및 암호화를 위한 디지털 인증서를 발급, 관리하는 서비스 제공 기관

- 디지털 서명의 서명자의 신원 확인
- 서명자로부터 그 공개키를 맡아 보관
- 대외적으로 서명자와 그의 공개키 귀속관계를 보장
- 인증서 및 인증서 폐기목록을 발행할 수 있다
- 하나 이상의 등록기관을 지정할 수 있다

## 왜 인증서를 사용하나?

클라이언트와 서버간에 데이터를 주고 받을 때 패킷을 훔쳐 볼 수 있는데(Snffing) 여기에 민검정보들이 원치 않는 사람들에게 노출 될 수 있다. 이를 막기 위해 SSL/TLS을 사용하여 암호화 한다. 이 때 인증서라는 일종의 서명을 사용한다. 인증서는 결국 '당신이 신뢰할 수 있는 사람인가' 라는 것을 확인하기 위한 용도.

웹 브라우저 주소 옆 자물쇠는 인증서를 통해 브라우저-웹 서버 간 보안 연결이 수립되었다는 것을 의미.

## 인증서 구조

### 신뢰 가능한 기관

무조건 신뢰할 수 있는 기관인 Root CA가 있다. 최상위 인증기관이라 불리며 Verisign, Geotrust 등의 회사가 있다.

![image](https://user-images.githubusercontent.com/63634505/137336448-e30404b9-526a-400d-9235-ea8934a149e1.png)

이 기관은 본인의 고유 비밀키를 가지고 있고, 이에 대응하는 공개키를 전 세계에 배포한다. 배포된 공개키로 복호화가 가능한 데이터는 Root CA의 비밀키로 암호화 되었기 때문에 신용할 수 있는 데이터라 간주한다.

신뢰 가능하다 여겨지는 공개키는 이미 컴퓨터에 설치되어 있다.

![image](https://user-images.githubusercontent.com/63634505/137336547-e7ecc0b2-0ae3-4b1e-9422-e863253e55d4.png)

### 인증서 내용물

- 인증서의 소유자 이름
- 인증서 소유자의 공개키
- 인증서의 유효기간
- 고유한 UID
- 인증서의 기타 모든 값들을 해시화한 값

## 인증서의 구조

인증서는 계층구조로 되어있다. 회사가 계층구조로 되어있다. Root 인증서는 모두 신뢰하기로 약속한 기관.

![image](https://user-images.githubusercontent.com/63634505/137336628-64bb95af-009b-4eb6-b4a4-aa3d5445dcf4.png)

위 그림을 기준으로 설명하면, 가장 최상위 Root 인증서의 주인은 Geotrust 회사이다. 자신의 인증서를 만들고 싶은 Google CA 회사는 Geotrust에게 이렇게 요청한다. '당신네들은 신뢰 가능한 회사로 알려져 있죠. 나는 Google CA 회사의 인증서를 만드려고 해요. 내 인증서의 내용물을 드릴테니, 인증서의 내용물을 종합해 해시화한 값을 당신네 (Geotrust) 회사의 비밀 키로 암호화 해줄래요?'

인증서의 내용물을 종합해 해시화한 값을 Geotrust의 비밀 키로 암호화해달라고 하는 이유는 간단하지만 매우 중요하다. 세상 사람들은 Geotrust 회사의 공개 키를 전부 가지고 있고, 이 공개 키로 복호화되는 데이터는 신뢰할 수 있는 데이터임을 알고 있다. 만약 세상 사람들이 Google CA 인증서를 누군가로부터 전달받은 뒤, Google CA 인증서 내부의 암호화된 해시 값을 Geotrust의 공개 키를 이용해 복호화에 성공했다고 가정해보자. 그렇다면 Google CA의 인증서의 내용물에 대한 해시 값을, Geotrust가 Geotrust의 비밀 키로 암호화 해준것일테니, Google CA 또한 신뢰할 수 있다고 간주하는 것이다.

### 질문

- HSTS 란?