# OSI 7 계층

OSI 모형(Open Ststems Interconnection Reference Model)은 국제표준화기구(ISO)에서 개발한 모델이다. 컴퓨터 네트워크 프로토콜 디자인과 통신을 계층으로 나눠 설명한 것. 회사의 장비마다 호환되지 않던 네트워크 장치들을 호환성 높게 하기 위해 네트워크 7 계층으로 분리하면서 표준을 만듬.

**서로 통신할 수 있게 서로 알아 들을 수 있는 규칙을 정한 것**

더 이상 산업표준으로 추천되지 않는다. 프로토콜 개발자들도 OSI 모델을 정확하게 따르도록 요구 받지 않는다. 요즘은 TCP/IP모델로 알려진 미국방성 모델을 선호한다.

물리계층은 하드웨어, 데이터 링크 계층이 소프트웨어 + 하드웨어, 3계층 이후 부터는 모두 소프트웨어

![image](https://user-images.githubusercontent.com/63634505/118989642-28d5f480-b9bd-11eb-9aa0-d38bfff2a7e2.png)

응용계층에서 부터 시작하여 한 단계씩 내려올 때마다 헤더가 붙는 것을 알 수 있다. 헤더에는 계층에 대한 정보가 기록되어 있다. 데이터를 보낼때는 응용계층에서 헤더를 붙여 넘겨준다. 수신 할 경우에는 물리 계층 부터 헤더의 정보를 떼어낸다.

#### 먼저, 계층별 키포인트
| 계층 | 키워드 |
|--|--|
| 7 Application Layer (응용 계층) | HTTP, FTP 등의 프로토콜 |
| 6 Presentation Layer (표현 계층) | TCP/IP 로 넘어오면서 응용계층으로 흡수 |
| 5 Session Layer (세선 계층) | TCP/IP 로 넘어오면서 응용계층으로 흡수 |
| 4 Transport Layer (전송 계층) | Port 번호  |
| 3 Network Layer (네트워크 계층) | IP주소, 경로(route), 패킷 전달 |
| 2 DataLink Layer (데이터링크 계층) | MAC 주소, 라우터 |
| 1 Physical Layer (물리 계층) | 통신 단위 : 비트 (0과 1), 하드웨어 |
| 기타 키포인트 | TCP/IP Updated 모델이 요즘 사용되는 구조 |

### [계층1] 물리 계층(Physical Layer)

- 물리적인 부분 즉 네트워크 하드웨어 전송 기술을 말한다.
- 다양한 특징의 하드웨어 기술이 접목되어 있어 가장 복잡한 계층으로 간주된다.
- 데이터는 0과 1의 비트열로 이루어져 있다.
- 그저 데이터를 전달하기만 할 뿐 어떤 에러가 있고 기능이 있는지는 관여하지 않는다.
- 동축 케이블, 광섬유, 모뎀

### [계층2] 데이터 링크 계층(Data Link Layer)

- 물리 계층에서 송,수신되는 정보의 오류와 흐름을 관리하여 안전한 정보 전달을 수행하도록 한다.
* **Framing(데이터 포장하기)은 데이터링크 계층에 속하는 작업 중 하나**
* frame 덕분에 여러 데이터가 한 번에 와도 그것들을 구분할 수 있다.
- 포인트 투 포인트 간 신뢰성있는 전송을 보장하기 위한 계층.
- 오류나 재전송의 기능을 가지고 있다.
- MAC 주소를 가지고 있다.
- 데이터의 단위는 프레임(Frame)
- Ethernet, Token Ring, PPP, WIFI

### [계층3] 네트워크 계층(Network Layer)

- 네트워크 계층이 라우팅 기능을 맡고 있어서 네트워크에서 아주 중요
- 어느 컴퓨터에게 전송할지 주소를 가지고 있다. (ex - IP주소)
- 데이터를 `패킷(Packets, 출발지, 목적지 IP, 기타)`으로 감싼다.
- 라우팅 기능 - 목적지까지 가장 안전하고 빠르게 데이터를 보내는 기능
   - 논리적 주소인 IP주소를 통해 길을찾고(routing) 자신의 다음 라우터에게 데이터를 넘겨준다(forwarding)
- IP, ICMP, IGMP, ARP, OSPF

### [계층4] 전송 계층(Transport Layer)

![https://user-images.githubusercontent.com/48986787/119350344-2d125280-bcda-11eb-9170-306c8cd14870.png](https://user-images.githubusercontent.com/48986787/119350344-2d125280-bcda-11eb-9170-306c8cd14870.png)

- 양 끝단의 사용자들이 신뢰성있는 데이터를 주고 받을 수 있게 한다.
- 신뢰성있고 효율적인 데이터 전송을 위해 오류검출 및 복구, 흐름제어와 중복검사를 수행한다.
- 데이터를 `세그먼트(Segment, 출발지, 목적지 PORT, 전송 제어, 순서 검증 정보)`로 감싼다.
- 데이터 전송을 위해 Port 번호가 사용된다. (TCP, UDP)
    - Port(포트) 번호: 하나의 컴퓨터에서 동시에 실행되고 있는 프로세스들이 서로 겹치지 않게 가져야하는 정수 값
- 데이터의 단위는 TCP - 세그먼트(Segment), UDP- datagram

### [계층5] 세션 계층(Session Layer)

- 응용 프로세스가 통신을 관리하기 위한 방법을 정의
- 송신자와 수신자 간에 통신을 위해서 동기화 신호를 주고 받는다
- 세션을 열고, 데이터가 전송되는 동안 세션이 열려 있고, 작동하는지 확인하며, 통신이 종료되면 세션을 닫는 역할
- 체크포인트를 두어, 연결이 손실되는 경우 마지막 체크 포인트에서 연결 복구를 시도
- 즉, 동기화 기능을 제공
- SSH, RPC, TLS

### [계층6] 표현 계층(Presentation Layer)

- 데이터를 어떻게 표현할지 정하는 역할
- 송신자에서 온 데이터를 해석하기 위한 응용계층 데이터 부호화, 변화
- 수신자에서 데이터의 압축을 풀 수 있는 방식으로 된 데이터 압축
- 데이터의 암호화와 복호화
- MIME 인코딩이나 암호화 등의 동작이 표현계층에서 이뤄진다.
- JPEG, MPEG, XDR, GIF

### [계층7] 응용 계층(Application Layer)

- 사용자와 가장 가까운 계층
- 응용 서비스나 프로세스가 응용계층에서 동작
- 이때 각 응용프로그램(프로세스)은 PORT번호를 부여받음  
- 구글 크롬, 사파리 등의 웹브라우저와 줌, 스카이프 등의 응용프로그램이 대표적
* 다른 프로토콜로는
  * 파일 전송 : FTP, TFTP
  * 원격 로그인 : TELNET

* 현대의 인터넷은 OSI 모델이 아닌 TCP/IP 모델을 따르고 있다. 시장 싸움에서 TCP/IP 모델이 이겼기 때문.
* OSI 7계층의 SESSION, PRESENTATION, APPLICATION -> TCP/IP 에서 APPLICATION으로 통합

## 결론

네트워크 시스템은 소프트웨어 아키텍처인 Layered 아키텍처를 따른다.

즉, 네트워크 시스템은 하나의 커다란 소프트웨어라 볼 수 있다.

결론적으로, OSI 7 Layer 모델은 거대한 네트워크 소프트웨어의 구조를 설명하는 것이다. 